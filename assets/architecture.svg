<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 380">
  <defs>
    <!-- Gradients -->
    <linearGradient id="matomoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3152A0"/>
      <stop offset="100%" style="stop-color:#35BFC0"/>
    </linearGradient>
    <linearGradient id="claudeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#D97757"/>
      <stop offset="100%" style="stop-color:#E8956A"/>
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366F1"/>
      <stop offset="100%" style="stop-color:#8B5CF6"/>
    </linearGradient>
    <linearGradient id="dataFlowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#35BFC0"/>
      <stop offset="50%" style="stop-color:#6366F1"/>
      <stop offset="100%" style="stop-color:#E8956A"/>
    </linearGradient>
    <linearGradient id="startupGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#34D399"/>
    </linearGradient>

    <!-- Glow filters -->
    <filter id="glow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="softGlow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow markers -->
    <marker id="arrowTeal" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#35BFC0"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8B5CF6"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#E8956A"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10B981"/>
    </marker>

    <!-- Animated path for data flow -->
    <path id="introspectPath" d="M340 185 C280 185 240 185 195 185" fill="none"/>
    <path id="apiCallPath" d="M195 215 C280 215 340 215 340 215" fill="none"/>
    <path id="mcpRequestPath" d="M705 175 L545 175" fill="none"/>
    <path id="mcpResponsePath" d="M545 205 L705 205" fill="none"/>
  </defs>

  <!-- Background with subtle gradient -->
  <rect width="900" height="380" fill="#0F172A" rx="16"/>

  <!-- Animated grid pattern -->
  <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
    <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#1E293B" stroke-width="0.5"/>
  </pattern>
  <rect width="900" height="380" fill="url(#grid)" rx="16" opacity="0.7"/>

  <!-- Decorative corner accents -->
  <path d="M0 30 L0 16 Q0 0 16 0 L30 0" fill="none" stroke="#6366F1" stroke-width="2" opacity="0.3"/>
  <path d="M900 30 L900 16 Q900 0 884 0 L870 0" fill="none" stroke="#6366F1" stroke-width="2" opacity="0.3"/>
  <path d="M0 350 L0 364 Q0 380 16 380 L30 380" fill="none" stroke="#6366F1" stroke-width="2" opacity="0.3"/>
  <path d="M900 350 L900 364 Q900 380 884 380 L870 380" fill="none" stroke="#6366F1" stroke-width="2" opacity="0.3"/>

  <!-- === TITLE === -->
  <text x="450" y="38" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="18" font-weight="700" letter-spacing="1">
    Dynamic API Introspection at Startup
  </text>
  <text x="450" y="56" text-anchor="middle" fill="#64748B" font-family="system-ui, sans-serif" font-size="11">
    No configuration file needed - just provide your Matomo URL
  </text>

  <!-- === MATOMO INSTANCE === -->
  <g transform="translate(50, 120)">
    <!-- Main card -->
    <rect width="160" height="160" rx="16" fill="url(#matomoGrad)" filter="url(#glow)">
      <animate attributeName="opacity" values="0.92;1;0.92" dur="4s" repeatCount="indefinite"/>
    </rect>

    <!-- Floating analytics chart icon -->
    <g transform="translate(40, 25)">
      <!-- Chart background -->
      <rect x="0" y="0" width="80" height="60" rx="8" fill="rgba(255,255,255,0.15)"/>

      <!-- Animated bars -->
      <rect x="12" y="35" width="14" height="20" rx="2" fill="white" opacity="0.95">
        <animate attributeName="height" values="20;35;20" dur="2s" repeatCount="indefinite"/>
        <animate attributeName="y" values="35;20;35" dur="2s" repeatCount="indefinite"/>
      </rect>
      <rect x="33" y="20" width="14" height="35" rx="2" fill="white" opacity="0.95">
        <animate attributeName="height" values="35;25;35" dur="2.5s" repeatCount="indefinite"/>
        <animate attributeName="y" values="20;30;20" dur="2.5s" repeatCount="indefinite"/>
      </rect>
      <rect x="54" y="10" width="14" height="45" rx="2" fill="white" opacity="0.95">
        <animate attributeName="height" values="45;30;45" dur="1.8s" repeatCount="indefinite"/>
        <animate attributeName="y" values="10;25;10" dur="1.8s" repeatCount="indefinite"/>
      </rect>
    </g>

    <!-- Labels -->
    <text x="80" y="110" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="18" font-weight="700">Matomo</text>
    <text x="80" y="128" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="system-ui, sans-serif" font-size="11">Analytics Platform</text>

    <!-- API badge -->
    <g transform="translate(45, 138)">
      <rect width="70" height="18" rx="9" fill="rgba(255,255,255,0.2)"/>
      <text x="35" y="13" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="600">REST API</text>
    </g>
  </g>

  <!-- === MCP SERVER (Central, larger) === -->
  <g transform="translate(340, 95)">
    <!-- Outer glow ring -->
    <rect x="-8" y="-8" width="216" height="206" rx="24" fill="none" stroke="url(#serverGrad)" stroke-width="1" opacity="0.3">
      <animate attributeName="opacity" values="0.2;0.4;0.2" dur="3s" repeatCount="indefinite"/>
    </rect>

    <!-- Main card -->
    <rect width="200" height="190" rx="20" fill="url(#serverGrad)" filter="url(#glow)">
      <animate attributeName="opacity" values="0.95;1;0.95" dur="3s" repeatCount="indefinite"/>
    </rect>

    <!-- Server rack visualization -->
    <g transform="translate(50, 20)">
      <!-- Rack units -->
      <g>
        <rect x="0" y="0" width="100" height="22" rx="4" fill="rgba(255,255,255,0.95)"/>
        <circle cx="14" cy="11" r="5" fill="#22C55E">
          <animate attributeName="opacity" values="1;0.3;1" dur="1s" repeatCount="indefinite"/>
        </circle>
        <text x="30" y="15" fill="#6366F1" font-family="monospace" font-size="9" font-weight="600">INTROSPECT</text>
      </g>

      <g transform="translate(0, 28)">
        <rect x="0" y="0" width="100" height="22" rx="4" fill="rgba(255,255,255,0.95)"/>
        <circle cx="14" cy="11" r="5" fill="#22C55E">
          <animate attributeName="opacity" values="1;0.3;1" dur="1.3s" repeatCount="indefinite" begin="0.2s"/>
        </circle>
        <text x="30" y="15" fill="#6366F1" font-family="monospace" font-size="9" font-weight="600">GENERATE</text>
      </g>

      <g transform="translate(0, 56)">
        <rect x="0" y="0" width="100" height="22" rx="4" fill="rgba(255,255,255,0.95)"/>
        <circle cx="14" cy="11" r="5" fill="#22C55E">
          <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite" begin="0.4s"/>
        </circle>
        <text x="30" y="15" fill="#6366F1" font-family="monospace" font-size="9" font-weight="600">SERVE</text>
      </g>
    </g>

    <!-- Labels -->
    <text x="100" y="125" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="18" font-weight="700">mcp-matomo</text>
    <text x="100" y="143" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="system-ui, sans-serif" font-size="11">MCP Server</text>

    <!-- Dynamic badge -->
    <g transform="translate(35, 152)">
      <rect width="130" height="24" rx="12" fill="rgba(16,185,129,0.3)" stroke="#10B981" stroke-width="1"/>
      <circle cx="16" cy="12" r="4" fill="#10B981">
        <animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
        <animate attributeName="opacity" values="1;0.5;1" dur="1.5s" repeatCount="indefinite"/>
      </circle>
      <text x="72" y="16" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="10" font-weight="600">Auto-Discovery</text>
    </g>
  </g>

  <!-- === CLAUDE === -->
  <g transform="translate(690, 120)">
    <!-- Main card -->
    <rect width="160" height="160" rx="16" fill="url(#claudeGrad)" filter="url(#glow)">
      <animate attributeName="opacity" values="0.92;1;0.92" dur="3.5s" repeatCount="indefinite"/>
    </rect>

    <!-- Claude sparkle icon -->
    <g transform="translate(55, 25)">
      <path d="M25 0 L29 20 L50 25 L29 30 L25 50 L21 30 L0 25 L21 20 Z" fill="white" opacity="0.95">
        <animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="12s" repeatCount="indefinite"/>
        <animate attributeName="opacity" values="0.95;0.6;0.95" dur="2.5s" repeatCount="indefinite"/>
      </path>
      <!-- Inner sparkle -->
      <circle cx="25" cy="25" r="8" fill="rgba(255,255,255,0.3)">
        <animate attributeName="r" values="6;10;6" dur="2s" repeatCount="indefinite"/>
      </circle>
    </g>

    <!-- Labels -->
    <text x="80" y="100" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="18" font-weight="700">Claude</text>
    <text x="80" y="118" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="system-ui, sans-serif" font-size="11">AI Assistant</text>

    <!-- Query examples -->
    <g transform="translate(15, 130)">
      <rect width="130" height="22" rx="6" fill="rgba(255,255,255,0.15)"/>
      <text x="65" y="15" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui, sans-serif" font-size="9" font-style="italic">"Show me traffic stats"</text>
    </g>
  </g>

  <!-- === CONNECTION: Matomo <-> MCP Server === -->
  <!-- Introspection arrow (startup) -->
  <g>
    <path d="M340 170 C280 170 250 170 215 170" fill="none" stroke="#10B981" stroke-width="2.5" stroke-dasharray="6,4" marker-end="url(#arrowGreen)">
      <animate attributeName="stroke-dashoffset" values="0;-20" dur="1s" repeatCount="indefinite"/>
    </path>
    <!-- Animated discovery packet -->
    <circle r="6" fill="#10B981" filter="url(#softGlow)">
      <animateMotion dur="2s" repeatCount="indefinite">
        <mpath href="#introspectPath"/>
      </animateMotion>
      <animate attributeName="opacity" values="1;0.4;1" dur="0.6s" repeatCount="indefinite"/>
    </circle>
  </g>
  <text x="270" y="158" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="9" font-weight="600">API Introspection</text>

  <!-- API calls arrow (runtime) -->
  <g>
    <path d="M215 220 C280 220 320 220 340 220" fill="none" stroke="#35BFC0" stroke-width="2.5" marker-end="url(#arrowTeal)"/>
    <!-- Animated data packet -->
    <circle r="5" fill="#35BFC0" filter="url(#softGlow)">
      <animateMotion dur="1.5s" repeatCount="indefinite">
        <mpath href="#apiCallPath"/>
      </animateMotion>
      <animate attributeName="opacity" values="1;0.5;1" dur="0.5s" repeatCount="indefinite"/>
    </circle>
  </g>
  <text x="270" y="238" text-anchor="middle" fill="#35BFC0" font-family="monospace" font-size="9" font-weight="600">Analytics Data</text>

  <!-- === CONNECTION: MCP Server <-> Claude === -->
  <!-- MCP Protocol bidirectional -->
  <g>
    <!-- Request arrow -->
    <path d="M705 175 L545 175" fill="none" stroke="#E8956A" stroke-width="2.5" marker-end="url(#arrowOrange)"/>
    <!-- Response arrow -->
    <path d="M545 205 L705 205" fill="none" stroke="#A78BFA" stroke-width="2.5" marker-end="url(#arrowPurple)"/>

    <!-- Animated packets -->
    <circle r="5" fill="#E8956A" filter="url(#softGlow)">
      <animateMotion dur="1.2s" repeatCount="indefinite">
        <mpath href="#mcpRequestPath"/>
      </animateMotion>
      <animate attributeName="opacity" values="1;0.4;1" dur="0.4s" repeatCount="indefinite"/>
    </circle>
    <circle r="5" fill="#A78BFA" filter="url(#softGlow)">
      <animateMotion dur="1.4s" repeatCount="indefinite" begin="0.3s">
        <mpath href="#mcpResponsePath"/>
      </animateMotion>
      <animate attributeName="opacity" values="1;0.4;1" dur="0.4s" repeatCount="indefinite"/>
    </circle>
  </g>

  <!-- MCP Label with background -->
  <g transform="translate(595, 145)">
    <rect x="0" y="0" width="50" height="20" rx="10" fill="#1E293B" stroke="#E8956A" stroke-width="1"/>
    <text x="25" y="14" text-anchor="middle" fill="#E8956A" font-family="monospace" font-size="10" font-weight="700">MCP</text>
  </g>

  <!-- === BOTTOM INFO BAR === -->
  <g transform="translate(0, 310)">
    <!-- Background bar -->
    <rect x="50" y="0" width="800" height="55" rx="12" fill="#1E293B" opacity="0.7"/>

    <!-- Tool count -->
    <g transform="translate(100, 10)">
      <rect width="120" height="35" rx="8" fill="rgba(99,102,241,0.2)" stroke="#6366F1" stroke-width="1"/>
      <text x="60" y="15" text-anchor="middle" fill="#A78BFA" font-family="monospace" font-size="20" font-weight="700">63+</text>
      <text x="60" y="29" text-anchor="middle" fill="#64748B" font-family="system-ui, sans-serif" font-size="9">API Tools</text>
    </g>

    <!-- Feature: Zero Config -->
    <g transform="translate(260, 10)">
      <rect width="130" height="35" rx="8" fill="rgba(16,185,129,0.15)" stroke="#10B981" stroke-width="1"/>
      <circle cx="20" cy="17.5" r="8" fill="#10B981" opacity="0.3"/>
      <text x="20" y="21" text-anchor="middle" fill="#10B981" font-family="system-ui, sans-serif" font-size="12">&#10003;</text>
      <text x="80" y="16" text-anchor="middle" fill="#10B981" font-family="system-ui, sans-serif" font-size="11" font-weight="600">Zero Config</text>
      <text x="80" y="29" text-anchor="middle" fill="#64748B" font-family="system-ui, sans-serif" font-size="8">Just add URL</text>
    </g>

    <!-- Feature: Real-time -->
    <g transform="translate(420, 10)">
      <rect width="130" height="35" rx="8" fill="rgba(53,191,192,0.15)" stroke="#35BFC0" stroke-width="1"/>
      <circle cx="20" cy="17.5" r="6" fill="none" stroke="#35BFC0" stroke-width="2">
        <animate attributeName="r" values="4;8;4" dur="1.5s" repeatCount="indefinite"/>
        <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite"/>
      </circle>
      <text x="80" y="16" text-anchor="middle" fill="#35BFC0" font-family="system-ui, sans-serif" font-size="11" font-weight="600">Real-time</text>
      <text x="80" y="29" text-anchor="middle" fill="#64748B" font-family="system-ui, sans-serif" font-size="8">Live analytics</text>
    </g>

    <!-- Feature: All Plugins -->
    <g transform="translate(580, 10)">
      <rect width="130" height="35" rx="8" fill="rgba(139,92,246,0.15)" stroke="#8B5CF6" stroke-width="1"/>
      <g transform="translate(12, 10)">
        <rect x="0" y="0" width="5" height="15" rx="1" fill="#8B5CF6" opacity="0.7"/>
        <rect x="6" y="3" width="5" height="12" rx="1" fill="#8B5CF6" opacity="0.85"/>
        <rect x="12" y="6" width="5" height="9" rx="1" fill="#8B5CF6"/>
      </g>
      <text x="80" y="16" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, sans-serif" font-size="11" font-weight="600">All Plugins</text>
      <text x="80" y="29" text-anchor="middle" fill="#64748B" font-family="system-ui, sans-serif" font-size="8">Auto-detected</text>
    </g>

    <!-- Command example -->
    <g transform="translate(740, 10)">
      <rect width="90" height="35" rx="8" fill="rgba(255,255,255,0.05)" stroke="#475569" stroke-width="1"/>
      <text x="45" y="16" text-anchor="middle" fill="#94A3B8" font-family="monospace" font-size="8">--url</text>
      <text x="45" y="28" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="7">matomo.io</text>
    </g>
  </g>
</svg>
